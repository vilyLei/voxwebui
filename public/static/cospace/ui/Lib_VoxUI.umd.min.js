(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["Lib_VoxUI"]=e():t["Lib_VoxUI"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fae3")}({"05f0":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("c21f"),n=i("9b53"),r=i("228b"),l=i("0efa");class a extends s.ClipLabelBase{constructor(){super(...arguments),this.m_colors=null,this.m_material=null,this.m_fixSize=!0,this.m_hasTex=!1}createMesh(t,e){let i=new Uint16Array([0,1,2,0,2,3]),s=new Float32Array(this.createVS(0,0,this.m_width,this.m_height)),n=r.VoxMesh.createRawMesh();if(n.reset(),n.setIVS(i),n.addFloat32Data(s,3),""!=e&&null!=t){let i=t.getTexObjFromAtlas(e),s=new Float32Array(i.uvs);n.addFloat32Data(s,2)}return n.initialize(),n}hasTexture(){return this.m_hasTex}initialize(t,e,i){if(this.isIniting()&&i>0){this.init(),this.m_hasTex=!1;let s=null;if(""!=e&&null!=t){let i=t.getTexObjFromAtlas(e);this.m_fixSize&&(this.m_width=i.getWidth(),this.m_height=i.getHeight()),this.m_hasTex=!0,s=i.texture}let r=this.createMaterial(s),a=this.createMesh(t,e),o=n.VoxEntity.createDisplayEntity();o.setMaterial(r),o.setMesh(a),this.m_entities.push(o),this.m_material=r;let h=new Array(i);for(let t=0;t<i;++t)h[t]=l.VoxMaterial.createColor4();this.m_colors=h,this.m_total=i,this.setClipIndex(0)}}initializeWithoutTex(t,e,i){this.m_width=t,this.m_height=e,this.m_fixSize=!1,this.initialize(null,"",i)}initializeWithSize(t,e,i,s,n){t>0&&e>0&&(this.m_width=t,this.m_height=e,this.m_fixSize=!1,this.initialize(i,s,n))}initializeWithLable(t){if(this.isIniting()&&null!=t&&t!=this){if(t.getClipsTotal()<1)throw Error("Error: srcLable.getClipsTotal() < 1");let e=t.getREntities();for(let i=0;i<e.length;++i){let s=e[i],r=s.getMesh(),a=s.getMaterial().getTextureAt(0),o=this.m_total=t.getClipsTotal(),h=t.getColors(),u=new Array(o);for(let t=0;t<o;++t)u[t]=l.VoxMaterial.createColor4(),u[t].copyFrom(h[t]);this.m_colors=u,this.m_width=t.getWidth(),this.m_height=t.getHeight();let c=this.createMaterial(a),m=n.VoxEntity.createDisplayEntity();m.setMaterial(c),m.setMesh(r),this.m_entities.push(m),null==this.m_material&&(this.m_material=c)}this.setClipIndex(0)}}displaceFromLable(t){if(null!=t&&t!=this&&t.getClipsTotal()<1)throw Error("Error: srcLable.getClipsTotal() < 1")}getColorAt(t){if(t>=0&&t<this.m_total)return this.m_colors[t]}setColorAt(t,e){t>=0&&t<this.m_total&&null!=e&&this.m_colors[t].copyFrom(e)}setColors(t){if(null!=t){let e=this.m_colors,i=t.length;i>e.length&&(i=e.length);for(let s=0;s<i;++s)e[s].copyFrom(t[s])}}setClipIndex(t){t>=0&&t<this.m_total&&(this.m_index=t,this.m_material.setColor(this.m_colors[t]))}getColors(){return this.m_colors}}e.ClipColorLabel=a},"0aa4":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(){this.m_tipEntity=null}initialize(t,e=2){if(null==this.m_tipEntity){this.m_uiscene=t;let i=Lib_VoxUI.createRectTextTip();i.initialize(t,e),this.m_tipEntity=i}}getTipEntity(t){return this.m_tipEntity}addTipsTarget(t,e){this.m_tipEntity.addEntity(t)}removeTipsTarget(t,e){this.m_tipEntity.removeEntity(t)}destroy(){}}e.TipsSystem=s},"0b77":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(){this.m_sc=null,this.m_parent=null,this.m_rotation=0,this.m_visible=!0,this.m_entities=[],this.m_width=0,this.m_height=0,this.m_v0=null,this.m_bounds=null,this.m_rcontainer=null,this.premultiplyAlpha=!1,this.transparent=!1,this.info=null,this.depthTest=!1}init(){this.isIniting()&&(this.m_pos=CoMath.createVec3(),this.m_scaleV=CoMath.createVec3(1,1,1),this.m_v0=CoMath.createVec3(),this.m_bounds=CoMath.createAABB())}isIniting(){return null==this.m_bounds}createMaterial(t=null){let e=CoMaterial.createDefaultMaterial();return e.premultiplyAlpha=this.premultiplyAlpha,null!=t&&e.setTextureList([t]),e.initializeByCodeBuf(null!=t),e}applyRST(t){const e=CoRScene.RendererState;this.transparent?this.premultiplyAlpha?t.setRenderState(e.BACK_ALPHA_ADD_ALWAYS_STATE):this.depthTest?t.setRenderState(e.BACK_TRANSPARENT_STATE):t.setRenderState(e.BACK_TRANSPARENT_ALWAYS_STATE):this.depthTest?t.setRenderState(e.NORMAL_STATE):t.setRenderState(e.BACK_NORMAL_ALWAYS_STATE)}createVS(t,e,i,s){let n=t,r=e,l=t+i,a=e+s,o=0;return[n,r,o,l,r,o,l,a,o,n,a,o]}updateScene(){}updateParent(){}__$setScene(t){this.m_sc!=t&&(this.m_sc=t,this.updateScene())}getScene(){return this.m_sc}setParent(t){return t!=this&&(this.m_parent=t,this.updateParent()),this}getParent(){return this.m_parent}getGlobalBounds(){return this.m_bounds}setVisible(t){this.m_visible=t;let e=this.m_entities;for(let i=0;i<e.length;++i)e[i].setVisible(t);null!=this.m_rcontainer&&this.m_rcontainer.setVisible(t)}isVisible(){return this.m_visible}getWidth(){return this.m_bounds.getWidth()}getHeight(){return this.m_bounds.getHeight()}setPosition(t){this.m_pos.copyFrom(t)}setX(t){this.m_pos.x=t}setY(t){this.m_pos.y=t}setZ(t){this.m_pos.z=t}getX(){return this.m_pos.x}getY(){return this.m_pos.y}getZ(){return this.m_pos.z}setXY(t,e){this.m_pos.x=t,this.m_pos.y=e}setXYZ(t,e,i){this.m_pos.setXYZ(t,e,i)}getPosition(t){return t.copyFrom(this.m_pos),t}setRotation(t){this.m_rotation=t}getRotation(){return this.m_rotation}setScaleXYZ(t,e,i){this.m_scaleV.setXYZ(t,e,i)}setScaleXY(t,e){this.setScaleXYZ(t,e,1)}setScaleX(t){this.m_scaleV.x=t}setScaleY(t){this.m_scaleV.y=t}getScaleX(){return this.m_scaleV.x}getScaleY(){return this.m_scaleV.y}copyTransformFrom(t){if(null!=t){let e=t.getScaleX(),i=t.getScaleY(),s=t.getRotation();this.setScaleXY(e,i),this.setRotation(s),t.getPosition(this.m_v0),this.setPosition(this.m_v0)}}getREntities(){return this.m_entities.slice(0)}getRContainer(){return this.m_rcontainer}updateEntity(t){t.setPosition(this.m_pos),t.setScale3(this.m_scaleV),t.setRotationXYZ(0,0,this.m_rotation),t.update(),this.m_bounds.union(t.getGlobalBounds())}update(){let t=this.m_entities,e=this.m_bounds;this.m_bounds.reset();for(let i=0;i<t.length;++i)this.updateEntity(t[i]);null!=this.m_rcontainer&&this.updateEntity(this.m_rcontainer),e.updateFast()}destroy(){let t=this.m_sc;null!=t&&t.removeEntity(this),this.m_rcontainer=null,this.m_sc=null,this.m_parent=null,this.m_bounds=null;let e=this.m_entities;for(let i=0;i<e.length;++i)e[i].destroy();e=[]}}e.UIEntityBase=s},"0efa":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("75f5");class n{constructor(){this.m_init=!0}initialize(t=null,e=""){return this.m_init=!this.isEnabled(),!!this.m_init&&(this.m_init=!1,""!=e&&void 0!==e||(e="static/cospace/coMaterial/CoMaterial.umd.min.js"),new s.ModuleLoader(1,()=>{null!=t&&this.isEnabled()&&t([e])}).load(e),!0)}isEnabled(){return"undefined"!==typeof CoMaterial}createColor4(t,e,i,s){return CoMaterial.createColor4(t,e,i,s)}createDefaultMaterial(t){return CoMaterial.createDefaultMaterial(t)}createLineMaterial(t){return CoMaterial.createLineMaterial(t)}createQuadLineMaterial(t){return CoMaterial.createQuadLineMaterial(t)}createShaderMaterial(t){return CoMaterial.createShaderMaterial(t)}createMaterial(t){return CoMaterial.createMaterial(t)}creatMaterialContextParam(){return CoMaterial.creatMaterialContextParam()}createMaterialContext(){return CoMaterial.createMaterialContext()}}const r=new n;e.VoxMaterial=r},"189a":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("5470");class n extends s.LayouterBase{constructor(){super(),this.m_offsetvs=[]}update(t){const e=this.m_entities,i=e.length;let s=CoMath.createVec3();for(let n=0;n<i;++n)s.copyFrom(this.m_offsetvs[n]),s.x=t.width-s.x,s.y=t.height-s.y,s.addBy(this.m_offsetV),e[n].setPosition(s),e[n].update()}initEntityLayout(t,e){let i=CoMath.createVec3();t.getPosition(i),i.x=e.width-i.x,i.y=e.height-i.y,this.m_offsetvs.push(i)}destroy(){this.m_offsetvs=null,super.destroy()}}e.RightTopLayouter=n},"1eb2":function(t,e,i){"use strict";if("undefined"!==typeof window){var s=window.document.currentScript,n=i("8875");s=n(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:n});var r=s&&s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);r&&(i.p=r[1])}},"228b":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("75f5");class n{constructor(){this.m_init=!0}initialize(t=null,e=""){return this.m_init=!this.isEnabled(),!!this.m_init&&(this.m_init=!1,""!=e&&void 0!==e||(e="static/cospace/comesh/CoMesh.umd.min.js"),new s.ModuleLoader(1,()=>{null!=t&&this.isEnabled()&&t([e])}).load(e),!0)}isEnabled(){return"undefined"!==typeof CoMesh}get plane(){return CoMesh.plane}get line(){return CoMesh.line}get cone(){return CoMesh.cone}get box(){return CoMesh.box}createDataMesh(){return CoMesh.createDataMesh()}createRawMesh(){return CoMesh.createRawMesh()}createBoundsMesh(){return CoMesh.createBoundsMesh()}}const r=new n;e.VoxMesh=r},"23ac":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("0b77");class n extends s.UIEntityBase{constructor(){super(),this.m_uientities=[]}init(){this.isIniting()&&(super.init(),this.m_rcontainer=CoRScene.createDisplayEntityContainer())}addedEntity(t){}removedEntity(t){}update(){for(let t=0;t<this.m_uientities.length;++t)this.m_uientities[t].update();null!=this.m_rcontainer&&this.m_rcontainer.update(),super.update()}addEntity(t){if(null!=t){let e=0;for(;e<this.m_uientities.length;++e)if(this.m_uientities[e]==t)break;if(e>=this.m_uientities.length){this.m_uientities.push(t),t.update();let e=t.getRContainer();null!=e&&this.m_rcontainer.addChild(e);let i=t.getREntities();for(let t=0;t<i.length;++t)this.m_rcontainer.addEntity(i[t]);this.addedEntity(t)}}}removeEntity(t){if(null!=t){let e=0;for(;e<this.m_uientities.length;++e)if(this.m_uientities[e]==t){this.m_uientities.splice(e,1);let i=t.getRContainer();null!=i&&this.m_rcontainer.removeChild(i);let s=t.getREntities();for(let t=0;t<s.length;++t)this.m_rcontainer.removeEntity(s[t]);this.removedEntity(t);break}}}globalToLocal(t){this.m_rcontainer.globalToLocal(t)}localToGlobal(t){this.m_rcontainer.localToGlobal(t)}getEneitysTotal(){return this.m_uientities.length}}e.UIEntityContainer=n},2564:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(t,e=null,i=null){this.m_uid=s.s_uid++,this.m_urlChecker=null,this.m_oneTimes=!0,this.m_loaderMap=null,this.m_callback=e,this.m_times=t,this.m_urlChecker=i}setUrlChecker(t=null){this.m_urlChecker=t}getUrlChecker(){return this.m_urlChecker}getUid(){return this.m_uid}setCallback(t){return this.m_callback=t,this}addLoader(t){if(null!=t&&t!=this)if(this.isFinished())t.use();else{null==this.m_loaderMap&&(this.m_loaderMap=new Map);let e=this.m_loaderMap;e.has(t.getUid())||e.set(t.getUid(),t)}return this}isFinished(){return 0==this.m_times}useOnce(){this.m_oneTimes&&(this.m_oneTimes=!1,this.use())}use(){if(this.m_times>0&&(this.m_times--,this.isFinished()&&null!=this.m_callback&&(this.m_callback(),this.m_callback=null,null!=this.m_loaderMap))){for(let[t,e]of this.m_loaderMap)e.use();this.m_loaderMap=null}}hasModuleByUrl(t){return s.loadedMap.has(t)}load(t){if(""==t)return this;null!=this.m_urlChecker&&(t=this.m_urlChecker(t));let e=s.loadedMap;if(e.has(t))return void this.use();let i=s.loadingMap;if(!i.has(t))return i.set(t,[this]),this.loadData(t),this;{let e=i.get(t);for(let t=0;t<e.length;++t)if(e[t]==this)return;e.push(this)}}loadData(t){let e=new XMLHttpRequest;e.open("GET",t,!0),e.onerror=function(t){},e.onload=e=>{this.loadedUrl(t)},e.send(null)}loadedData(t,e){}loadedUrl(t){let e=s.loadedMap,i=s.loadingMap;e.set(t,1);let n=i.get(t);for(let s=0;s<n.length;++s)n[s].use();i.delete(t)}getDataByUrl(t){return null}clearAllData(){}destroy(){this.m_urlChecker=null}}s.s_uid=0,s.loadedMap=new Map,s.loadingMap=new Map,e.PackedLoader=s},"36f3":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("5470");class n extends s.LayouterBase{constructor(){super(),this.m_offsetvs=[]}update(t){const e=this.m_entities,i=e.length;for(let s=0;s<i;++s)e[s].update()}initEntityLayout(t,e){let i=CoMath.createVec3();t.getPosition(i),i.y=e.height-i.y,this.m_offsetvs.push(i)}destroy(){this.m_offsetvs=null,super.destroy()}}e.FreeLayouter=n},"38b3":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("0b77");class n extends s.UIEntityBase{constructor(){super(),this.m_pw=10,this.m_ph=10,this.m_sx=1,this.m_sy=1,this.m_material=null,this.m_tex=null,this.m_fontSize=24,this.m_text=""}initialize(t,e,i=24){if(""!=t&&this.isIniting()){i<8&&(i=8),this.m_fontSize=i,this.init(),this.m_text=t,this.m_uiScene=e;let s=CoEntity.createDisplayEntity();this.m_fontColor=CoMaterial.createColor4(),this.m_bgColor=CoMaterial.createColor4(1,1,1,0);let n=this.m_uiScene.texAtlas.createCharsImage(this.m_text,this.m_fontSize,this.m_fontColor,this.m_bgColor);this.m_tex=e.rscene.textureBlock.createImageTex2D(n.width,n.height),this.m_tex.setDataFromImage(n),this.m_tex.flipY=!0,this.m_tex.premultiplyAlpha=!0,this.m_tex.minFilter=CoRScene.TextureConst.LINEAR,this.m_tex.magFilter=CoRScene.TextureConst.NEAREST;let r=this.createMaterial(this.m_tex);this.m_material=r,CoMesh.plane.setBufSortFormat(r.getBufSortFormat());let l=CoMesh.plane.createXOY(0,0,1,1);this.m_pw=n.width,this.m_ph=n.height,s.setMaterial(r),s.setMesh(l),this.m_entities.push(s),this.applyRST(s),super.setScaleXY(this.m_sx*this.m_pw,this.m_sy*this.m_ph),this.update()}}setScaleXY(t,e){this.m_sx=t,this.m_sy=e,super.setScaleXY(t*this.m_pw,e*this.m_ph)}setScaleX(t){this.m_sx=t,super.setScaleX(t*this.m_pw)}setScaleY(t){this.m_sy=t,super.setScaleX(t*this.m_ph)}getScaleX(){return this.m_sx}getScaleY(){return this.m_sy}setText(t){if(null!=this.m_tex&&""!=t&&this.m_text!=t){this.m_text=t;let e=this.m_uiScene.texAtlas.createCharsImage(t,this.m_fontSize,this.m_fontColor,this.m_bgColor);this.m_tex.setDataFromImage(e,0,0,0,!0),this.m_tex.updateDataToGpu(),this.m_pw=e.width,this.m_ph=e.height,super.setScaleXY(this.m_sx*this.m_pw,this.m_sy*this.m_ph),this.update()}}getText(){return this.m_text}setColor(t){return this.m_fontColor.copyFrom(t),null!=this.m_material&&this.m_material.setColor(t),this}getColor(){return this.m_fontColor}destroy(){super.destroy(),this.m_material=null,this.m_uiScene=null,this.m_tex=null}}e.TextLabel=n},5470:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(){this.m_entities=[],this.m_opvs=[],this.m_initRect=null,this.m_offsetV=CoMath.createVec3()}setOffset(t){this.m_offsetV.copyFrom(t)}addUIEntity(t){if(null!=t){let e=0;for(;e<this.m_entities.length;++e)if(this.m_entities[e]==t)break;if(e>=this.m_entities.length){let e=CoMath.createVec3();t.getPosition(e),this.m_opvs.push(e),this.m_entities.push(t),null!=this.m_initRect&&this.initEntityLayout(t,this.m_initRect)}}}removeUIEntity(t){if(null!=t){let e=0;for(;e<this.m_entities.length;++e)if(this.m_entities[e]==t){this.m_entities.splice(e,1),this.m_opvs.splice(e,1);break}}}initLayout(t){if(null!=t){null!=this.m_initRect?this.m_initRect.copyFrom(t):this.m_initRect=t.clone();let e=this.m_entities;for(let t=0;t<e.length;++t)this.initEntityLayout(e[t],this.m_initRect)}}initEntityLayout(t,e){}applyLayout(t){}update(t){}destroy(){}}e.LayouterBase=s},"677d":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(){}calcRange(t,e=.7,i=.5){i<0?i=0:i>1&&(i=1),e<0?e=0:e>1&&(e=1);let s=t*(1-e),n=i*t,r=n+.5*s;r>t&&(r=t);let l=r-s;return[l,r]}avgLayout(t,e,i,s=-1){if(null!=t&&t.length>0){let n=t.length;switch(n){case 1:let n=.5*(i-e)+e;return[n-.5*t[0]];default:return this.calcAvgMulti(t,e,i,s)}}return null}calcAvgLayout(t,e,i=.7,s=.5){let n=this.calcRange(e,i,s);return this.avgLayout(t,n[0],n[1])}calcAvgFixLayout(t,e,i=10,s=.7,n=.5){let r=this.calcRange(e,s,n);return this.avgLayout(t,r[0],r[1],i)}calcAvgMulti(t,e,i,s=-1){let n=i-e,r=t.length,l=0;for(let o=0;o<r;o++)l+=t[o],s>0&&o>0&&(l+=s);let a=new Array(r);if(a[0]=e,a[r-1]=i-t[r-1],r>2)if(l<n){let e=(n-l)/(r-1);r--;for(let i=1;i<r;i++)a[i]=a[i-1]+t[i-1]+e}else if(s<=0){let e=a[0]+.5*t[0];n=a[r-1]+.5*t[r-1]-e;let i=n/(r-1);e+=i,r--;for(let t=1;t<r;t++)a[t]=e,e+=i}if(l>=n&&s>0){let i=.5*n+e-.5*(l+(r-1)*s);for(let e=0;e<r;e++)a[e]=i,i+=t[e]+s}return a}}e.AxisAlignCalc=s},7020:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(t=!0){this.m_map=new Map,this.m_selectFunc=null,this.m_deselectFunc=null,this.m_mouseUpSelect=!0,this.m_btn=null,this.m_mouseUpSelect=t}addButton(t){if(null!=t){null==this.m_map&&(this.m_map=new Map),this.m_map.set(t.uuid,t);const e=CoRScene.MouseEvent;this.m_mouseUpSelect?t.addEventListener(e.MOUSE_UP,this,this.mouseEvtFunc):t.addEventListener(e.MOUSE_DOWN,this,this.mouseEvtFunc)}}mouseEvtFunc(t){this.select(t.currentTarget.uuid)}setSelectedFunction(t,e){this.m_selectFunc=t,this.m_deselectFunc=e}select(t){if(null!=this.m_map&&this.m_map.has(t)){let e=this.m_map.get(t);this.m_btn!=e&&(null!=this.m_btn&&null!=this.m_deselectFunc&&this.m_deselectFunc(this.m_btn),this.m_btn=e,null!=this.m_selectFunc&&this.m_selectFunc(e))}}destroy(){this.m_btn=null,this.m_map=null,this.m_selectFunc=null,this.m_deselectFunc=null}}e.SelectButtonGroup=s},"75f5":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("2564");class n extends s.PackedLoader{constructor(t,e=null,i=null){super(t,e,i)}loadData(t){let e=new XMLHttpRequest;e.open("GET",t,!0),e.onerror=function(t){},e.onload=i=>{this.loadedData(e.response,t),this.loadedUrl(t)},e.send(null)}loadedData(t,e){let i=document.createElement("script");i.onerror=t=>{},i.type="text/javascript";try{i.innerHTML=t,document.head.appendChild(i)}catch(s){throw s}}}e.ModuleLoader=n},7908:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("efac"),n=i("189a"),r=i("9686"),l=i("36f3");class a{constructor(){this.m_layouters=[],this.m_rect=null}createFreeLayouter(){let t=new l.FreeLayouter;return this.addLayouter(t),t}createLeftTopLayouter(){let t=new s.LeftTopLayouter;return this.addLayouter(t),t}createRightTopLayouter(){let t=new n.RightTopLayouter;return this.addLayouter(t),t}createRightBottomLayouter(){let t=new r.RightBottomLayouter;return this.addLayouter(t),t}initialize(t){null!=t&&null==this.m_rect&&(t.update(),this.m_rect=CoMath.createAABB2D(t.x,t.y,t.width,t.height))}getAreaRect(){return this.m_rect}addLayouter(t){if(null!=t){let e=0,i=this.m_layouters;for(;e<i.length;++e)if(i[e]==t)break;e>=i.length&&(i.push(t),t.initLayout(this.m_rect))}}removeLayouter(t){if(null!=t){let e=0,i=this.m_layouters;for(;e<i.length;++e)if(i[e]==t){i.splice(e,1);break}}}update(t){this.m_rect.copyFrom(t);for(let e=0;e<this.m_layouters.length;++e)this.m_layouters[e].update(t)}destroy(){}}e.UILayout=a},7913:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("38b3"),n=i("d632"),r=i("cdda"),l=i("677d");class a extends n.UIPanel{constructor(){super(),this.m_promptLabel=null,this.m_prompt="Hi,Prompt Panel.",this.m_btnW=90,this.m_btnH=50,this.m_confirmFunc=null,this.m_cancelFunc=null,this.m_cancelBtnVis=!0,this.marginWidth=70,this.marginXFactor=.5,this.marginYFactor=.6,this.m_alignCalc=new l.AxisAlignCalc}initialize(t,e,i,s,n,r,l="Confirm",a="Cancel"){this.isIniting()&&(this.init(),this.m_scene=t,this.m_rpi=e,this.m_panelW=i,this.m_panelH=s,this.m_btnW=n,this.m_btnH=r,this.m_confirmNS=l,this.m_cancelNS=a,null==this.m_bgColor&&(this.m_bgColor=CoMaterial.createColor4()))}applyConfirmButton(){this.m_cancelBtnVis=!1;let t=this.m_cancelBtn;null==t||t.isVisible()||(this.m_cancelBtn.setVisible(!1),null!=this.m_confirmBtn&&this.isOpen()&&(this.layoutItems(),this.layout()))}applyAllButtons(){this.m_cancelBtnVis=!0,null!=this.m_cancelBtn&&this.m_cancelBtn.setVisible(!0)}setPrompt(t){if(""!=t&&this.m_prompt!=t){this.m_prompt=t;let e=this.m_promptLabel;if(null!=e){e.setText(t);let i=.5*(this.m_panelW-e.getWidth());e.setX(i),e.update(),null!=this.m_confirmBtn&&this.isOpen()&&(this.layoutItems(),this.layout())}}}setPromptTextColor(t){let e=this.m_promptLabel;null!=e&&e.setColor(t)}setListener(t,e){this.m_confirmFunc=t,this.m_cancelFunc=e}destroy(){super.destroy(),this.m_confirmFunc=null,this.m_cancelFunc=null,null!=this.m_confirmBtn&&(this.m_confirmBtn.destroy(),this.m_cancelBtn.destroy(),this.m_confirmBtn=null,this.m_cancelBtn=null)}buildPanel(t,e){this.buildItems()}buildItems(){if(null==this.m_confirmBtn){let t=this.getScene(),e=t.transparentTexAtlas,i=CoMaterial.createColor4,n=this.m_scene.uiConfig,l=n.getUIGlobalColor(),a=n.getUIPanelCfgByName("promptPanel"),o=a.btnKeys,h=a.btnTextFontFormat,u=a.textFontFormat,c=new s.TextLabel;c.depthTest=!0,c.transparent=!0,c.premultiplyAlpha=!0,c.initialize(this.m_prompt,t,u.fontSize);let m=i();m.fromBytesArray3(u.fontColor),c.setColor(m),this.m_promptLabel=c;CoRScene.MouseEvent;let _={text:this.m_confirmNS,textColor:i(),fontSize:h.fontSize,font:""};_.textColor.fromBytesArray3(h.fontColor);let d=[i(),i(),i(),i()];n.applyButtonColor(d,l.button.light);let p=r.ButtonBuilder,g=p.createTextButton(this.m_btnW,this.m_btnH,o[0],e,_,d);this.m_confirmBtn=g,_.text=this.m_cancelNS;let f=p.createTextButton(this.m_btnW,this.m_btnH,o[1],e,_,d);this.m_cancelBtn=f,this.addEntity(f),this.addEntity(g),this.addEntity(c)}}updateBgSize(){let t=this.m_panelW,e=this.m_promptLabel;e.update();let i=this.m_confirmBtn;i.update();let s=this.m_cancelBtn;s.update();let n=s.isVisible()?s.getWidth():0,r=i.getWidth()+n;n=r+Math.round(.2*r)+this.marginWidth;let l=e.getWidth()+this.marginWidth;l=n>l?n:l,t=this.m_panelW=l;let a=this.m_bgLabel;Math.abs(a.getWidth()-t)>.01&&(a.setScaleX(1),a.update(),l=a.getWidth(),a.setScaleX(t/l),a.update())}layoutItems(){this.m_cancelBtn.setVisible(this.m_cancelBtnVis),this.updateBgSize();let t=this.m_panelW,e=this.m_promptLabel,i=[this.m_btnH,e.getHeight()],s=this.m_alignCalc.calcAvgFixLayout(i,this.m_panelH,15,this.marginYFactor,.5),n=.5*(t-e.getWidth());e.setXY(n,s[1]),e.update(),this.m_cancelBtn.isVisible()?this.layoutButtons(n,s[0]):this.layoutOnlyConfirm(n,s[0])}layoutButtons(t,e){let i=[this.m_btnW,this.m_btnW],s=this.m_alignCalc.calcAvgFixLayout(i,this.m_panelW,10,this.marginXFactor,.5),n=this.m_confirmBtn,r=this.m_cancelBtn;n.setXY(s[0],e),n.update(),r.setXY(s[1],e),r.update()}layoutOnlyConfirm(t,e){let i=[this.m_btnW],s=this.m_alignCalc.calcAvgFixLayout(i,this.m_panelW,10,this.marginXFactor,.5),n=this.m_confirmBtn;n.setXY(s[0],e),n.update()}openThis(){let t=CoRScene.MouseEvent;null!=this.m_scene&&(this.m_scene.addEventListener(t.MOUSE_DOWN,this,this.stMouseDownListener),this.m_confirmBtn.addEventListener(t.MOUSE_UP,this,this.btnMouseUpListener),this.m_cancelBtn.addEventListener(t.MOUSE_UP,this,this.btnMouseUpListener),this.layoutItems())}closeThis(){this.m_cancelBtnVis=!0;let t=CoRScene.MouseEvent;null!=this.m_scene&&(this.m_scene.removeEventListener(t.MOUSE_DOWN,this,this.stMouseDownListener),this.m_confirmBtn.removeEventListener(t.MOUSE_UP,this,this.btnMouseUpListener),this.m_cancelBtn.removeEventListener(t.MOUSE_UP,this,this.btnMouseUpListener))}stMouseDownListener(t){let e=t.mouseX,i=t.mouseY,s=this.m_v0;s.setXYZ(e,i,0),this.globalToLocal(s),(s.x<0||s.x>this.m_panelW||s.y<0||s.y>this.m_panelH)&&this.close()}btnMouseUpListener(t){let e=t.uuid;switch(e){case"confirm":this.close(),null!=this.m_confirmFunc&&this.m_confirmFunc();break;case"cancel":this.close(),null!=this.m_cancelFunc&&this.m_cancelFunc();break;default:break}}}e.PromptPanel=a},"7dc1":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("f35d"),n=i("05f0"),r=i("ddfa"),l=i("9ba1"),a=i("38b3"),o=i("88b9"),h=i("e8f9"),u=i("cdda"),c=i("7020"),m=i("8698"),_=i("9f6b"),d=i("9043"),p=i("7908"),g=i("7913"),f=i("d632"),C=i("f280"),y=i("0aa4"),b=i("b6c0");function E(){return new l.ColorLabel}function M(){return new _.RectTextTip}function x(){return new s.ClipLabel}function S(){return new n.ClipColorLabel}function v(){return new r.ColorClipLabel}function L(){return new a.TextLabel}function R(){return new o.Button}function T(){return new h.FlagButton}function B(){return new c.SelectButtonGroup}function P(t,e,i,s,n,r){return u.ButtonBuilder.createTextButton(t,e,i,s,n,r)}function w(){return new f.UIPanel}function A(){return new g.PromptPanel}function D(t,e=null,i=512,s=3){let n=new m.VoxUIScene;if(null!=t&&n.initialize(t,i,s),n.uiConfig=e,null!=e){let t=new C.PromptSystem;t.initialize(n),n.prompt=t;let e=new y.TipsSystem;e.initialize(n),n.tips=e;let i=new b.PanelSystem;i.initialize(n),n.panel=i}return n}function I(){return new d.TipInfo}function F(){return new p.UILayout}e.createColorLabel=E,e.createRectTextTip=M,e.createClipLabel=x,e.createClipColorLabel=S,e.createColorClipLabel=v,e.createTextLabel=L,e.createButton=R,e.createFlagButton=T,e.createSelectButtonGroup=B,e.createTextButton=P,e.createUIPanel=w,e.createPromptPanel=A,e.createUIScene=D,e.createTipInfo=I,e.createUILayout=F},8698:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("7908");class n{constructor(){this.m_graph=null,this.texAtlas=null,this.transparentTexAtlas=null,this.layout=new s.UILayout,this.prompt=null,this.tips=null,this.panel=null,this.uiConfig=null,this.keyboardInteraction=null,this.texAtlasNearestFilter=!0}resizeHandle(t){this.resize()}initialize(t,e=1024,i=3){if(null==this.m_graph){this.m_graph=t;let s=t.getSceneAt(0),n=s.getStage3D();s.addEventListener(CoRScene.EventBase.RESIZE,this,this.resizeHandle);let r=t.createRendererSceneParam();r.cameraPerspectiveEnabled=!1,r.setAttriAlpha(!1),r.setCamProject(45,.1,3e3),r.setCamPosition(0,0,1500);let l=t.createSubScene(r,i,!0);l.enableMouseEvent(!0);let a=this;a.rscene=l;let o=a.texAtlas=CoTexture.createCanvasTexAtlas(),h=a.transparentTexAtlas=CoTexture.createCanvasTexAtlas();o.initialize(s,e,e,CoMaterial.createColor4(1,1,1,1),!1,this.texAtlasNearestFilter),o.getTexture().premultiplyAlpha=!1,h.initialize(s,e,e,CoMaterial.createColor4(1,1,1,0),!0,this.texAtlasNearestFilter),h.getTexture().premultiplyAlpha=!0,this.m_rstage=n;let u=this.rscene.getCamera();u.translationXYZ(n.stageHalfWidth,n.stageHalfHeight,1500),u.update();let c=this.getStage();this.m_stageRect=CoMath.createAABB2D(0,0,c.stageWidth,c.stageHeight),this.layout.initialize(this.m_stageRect)}}addEventListener(t,e,i,s=!0,n=!1){return this.m_rstage.addEventListener(t,e,i,s,n),this}removeEventListener(t,e,i){return this.m_rstage.removeEventListener(t,e,i),this}getStage(){return this.rscene.getStage3D()}addEntity(t,e=0){if(null!=t){t.__$setScene(this),t.update();let i=t.getRContainer();null!=i&&this.rscene.addContainer(i,e);let s=t.getREntities();for(let t=0;t<s.length;++t)this.rscene.addEntity(s[t],e,!0)}}removeEntity(t){if(null!=t){let e=this.rscene,i=t.getRContainer();null!=i&&e.removeContainer(i);let s=t.getREntities();for(let t=0;t<s.length;++t)e.removeEntity(s[t]);t.__$setScene(null)}}getRect(){return this.m_stageRect}resize(){let t=this.m_rstage,e=this.rscene.getCamera();e.translationXYZ(t.stageHalfWidth,t.stageHalfHeight,1500),e.update(),this.m_stageRect.setTo(0,0,t.stageWidth,t.stageHeight),this.updateLayout()}updateLayout(){this.layout.update(this.m_stageRect)}run(){const t=this.rscene;null!=t&&t.run()}}e.VoxUIScene=n},8875:function(t,e,i){var s,n,r;(function(i,l){n=[],s=l,r="function"===typeof s?s.apply(e,n):s,void 0===r||(t.exports=r)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(_){var i,s,n,r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,l=/@([^@]*):(\d+):(\d+)\s*$/gi,a=r.exec(_.stack)||l.exec(_.stack),o=a&&a[1]||!1,h=a&&a[2]||!1,u=document.location.href.replace(document.location.hash,""),c=document.getElementsByTagName("script");o===u&&(i=document.documentElement.outerHTML,s=new RegExp("(?:[^\\n]+?\\n){0,"+(h-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),n=i.replace(s,"$1").trim());for(var m=0;m<c.length;m++){if("interactive"===c[m].readyState)return c[m];if(c[m].src===o)return c[m];if(o===u&&c[m].innerHTML&&c[m].innerHTML.trim()===n)return c[m]}return null}}return t}))},"88b9":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("f35d"),n=i("0b77");class r extends n.UIEntityBase{constructor(){super(),this.m_enabled=!0,this.m_lb=null,this.m_lbs=[],this.uuid="btn",this.syncLabelClip=!0}addLabel(t){this.m_lbs.push(t)}enable(){return null!=this.m_dp&&(this.m_dp.enabled=!0),this.m_enabled=!0,this}disable(){return null!=this.m_dp&&(this.m_dp.enabled=!1),this.m_enabled=!1,this}isEnabled(){return this.m_enabled}setMouseEnabled(t){null!=this.m_entities&&(this.m_entities[0].mouseEnabled=t)}isMouseEnabled(){return null!=this.m_entities&&this.m_entities[0].mouseEnabled}initialize(t,e=null){if(this.isIniting()&&null!=t&&null!=e){if(this.init(),4!=e.length)throw Error("Error: idnsList.length != 4");let i=new s.ClipLabel;i.initialize(t,e),this.m_lb=i,this.initializeEvent(),this.m_lb.setClipIndex(0)}return this}initializeWithLable(t){if(this.isIniting()){if(this.init(),t.getClipsTotal()<1)throw Error("Error: lable.getClipsTotal() < 1");this.m_lb=t,this.initializeEvent(),this.m_lb.setClipIndex(0)}return this}getLable(){return this.m_lb}initializeEvent(){if(null==this.m_dp){const t=CoRScene.MouseEvent;let e=CoRScene.createMouseEvt3DDispatcher();e.currentTarget=this,e.uuid=this.uuid,e.enabled=this.m_enabled,e.addEventListener(t.MOUSE_DOWN,this,this.mouseDownListener),e.addEventListener(t.MOUSE_UP,this,this.mouseUpListener),e.addEventListener(t.MOUSE_OVER,this,this.mouseOverListener),e.addEventListener(t.MOUSE_OUT,this,this.mouseOutListener),this.m_lb.getREntities()[0].setEvtDispatcher(e),this.m_dp=e}this.m_entities=this.m_lb.getREntities().slice(0),this.m_entities[0].mouseEnabled=!0}setVisible(t){super.setVisible(t);let e=this.m_lbs;for(let i=0;i<e.length;++i)e[i].setVisible(t)}addEventListener(t,e,i,s=!0,n=!1){return this.m_dp.addEventListener(t,e,i,s,n),this}removeEventListener(t,e,i){return this.m_dp.removeEventListener(t,e,i),this}setLabelsClipAt(t){if(this.syncLabelClip){let e=this.m_lbs;if(e.length>0)for(let i=0;i<e.length;++i)e[i].setClipIndex(t)}}mouseOverListener(t){this.m_enabled&&(this.m_lb.setClipIndex(1),this.setLabelsClipAt(1))}mouseOutListener(t){this.m_enabled&&(this.m_lb.setClipIndex(0),this.setLabelsClipAt(0))}mouseDownListener(t){this.m_enabled&&(this.m_lb.setClipIndex(2),this.setLabelsClipAt(2))}mouseUpListener(t){this.m_enabled&&(this.m_lb.setClipIndex(3),this.setLabelsClipAt(3))}setClipIndex(t){return this.m_lb.setClipIndex(t),this}copyTransformFrom(t){if(null!=t){let e=t.getScaleX(),i=t.getScaleY(),s=t.getRotation();this.setScaleXY(e,i),this.setRotation(s),t.getPosition(this.m_v0),this.setPosition(this.m_v0)}}getREntities(){let t=this.m_lb.getREntities(),e=this.m_lbs;if(e.length>0){for(let i=0;i<e.length;++i)t=t.concat(e[i].getREntities());return t}return t}getRContainer(){return null}update(){this.m_bounds.reset();let t=this.m_scaleV,e=this.m_lb;e.setRotation(this.m_rotation),e.setScaleXY(t.x,t.y),e.setPosition(this.m_pos),e.update(),this.m_bounds.union(e.getGlobalBounds());let i=this.m_lbs;if(i.length>0)for(let s=0;s<i.length;++s)i[s].copyTransformFrom(this.m_lb),i[s].update(),this.m_bounds.union(i[s].getGlobalBounds());this.m_bounds.updateFast()}destroy(){let t=this.m_lb;null!=t&&(t.destroy(),t=null);let e=this.m_lbs;if(e.length>0){for(let t=0;t<e.length;++t)e[t].destroy();this.m_lbs=[]}null!=this.m_dp&&(this.m_dp.destroy(),this.m_dp=null),super.destroy()}}e.Button=r},9043:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(){this.m_pv=null}getPos(t,e,i,s,n){null==this.m_pv&&(this.m_pv=CoMath.createVec3());let r=this.m_pv,l=s.getHeight(),a=s.getWidth(),o=i.min;return r.x=o.x-2-a,r.y=e+2-l,r.y+l>n.getTop()&&(r.y=n.getTop()-2-l),r}}class n{constructor(){this.m_pv=null}getPos(t,e,i,s,n){null==this.m_pv&&(this.m_pv=CoMath.createVec3());let r=this.m_pv,l=s.getHeight(),a=i.max;return r.x=a.x+2,r.y=e+2-l,r.y+l>n.getTop()&&(r.y=n.getTop()-2-l),r}}class r{constructor(){this.m_pv=null}getPos(t,e,i,s,n){null==this.m_pv&&(this.m_pv=CoMath.createVec3());let r=this.m_pv,l=i.max,a=s.getWidth();return r.x=t+2,r.y=l.y+2,r.x+a>n.getRight()&&(r.x=n.getRight()-2-a),r}}class l{constructor(){this.m_pv=null}getPos(t,e,i,s,n){null==this.m_pv&&(this.m_pv=CoMath.createVec3());let r=this.m_pv,l=s.getHeight(),a=s.getWidth(),o=i.min;return r.x=t+2,r.y=o.y-2-l,r.x+a>n.getRight()&&(r.x=n.getRight()-2-a),r}}const a=new s,o=new n,h=new r,u=new l;class c{constructor(){this.m_content="ui entity tip info",this.m_aligner=null}setContent(t){return this.m_content=t,this}getCotent(){return this.m_content}alignLeft(){return this.m_aligner=a,this}alignRight(){return this.m_aligner=o,this}alignTop(){return this.m_aligner=h,this}alignBottom(){return this.m_aligner=u,this}getPos(t,e,i,n,r=null){return null==this.m_aligner&&(this.m_aligner=new s),this.m_aligner.getPos(t,e,i,n,r)}destroy(){this.m_aligner=null}}e.TipInfo=c},9686:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("5470");class n extends s.LayouterBase{constructor(){super(),this.m_offsetvs=[]}update(t){const e=this.m_entities,i=e.length;let s=CoMath.createVec3();for(let n=0;n<i;++n)s.copyFrom(this.m_offsetvs[n]),s.x=t.width-s.x,s.addBy(this.m_offsetV),e[n].setPosition(s),e[n].update()}initEntityLayout(t,e){t.update();let i=CoMath.createVec3();t.getPosition(i),i.x=e.width-i.x,this.m_offsetvs.push(i)}destroy(){this.m_offsetvs=null,super.destroy()}}e.RightBottomLayouter=n},"9b53":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("75f5");class n{constructor(){this.m_init=!0}initialize(t=null,e=""){return this.m_init=!this.isEnabled(),!!this.m_init&&(this.m_init=!1,""!=e&&void 0!==e||(e="static/cospace/coentity/CoEntity.umd.min.js"),new s.ModuleLoader(1,()=>{null!=t&&this.isEnabled()&&t([e])}).load(e),!0)}isEnabled(){return"undefined"!==typeof CoEntity&&"undefined"!==typeof CoRScene}createDataMeshFromModel(t,e,i){return CoEntity.createDataMeshFromModel(t,e,i)}createDisplayEntityFromModel(t,e,i,s){return CoEntity.createDisplayEntityFromModel(t,e,i,s)}createFreeAxis3DEntity(t,e){return CoEntity.createFreeAxis3DEntity(t,e)}createAxis3DEntity(t){return CoEntity.createAxis3DEntity(t)}createDisplayEntityWithDataMesh(t,e,i,s){return CoEntity.createDisplayEntityWithDataMesh(t,e,i,s)}createDisplayEntity(){return CoEntity.createDisplayEntity()}createMouseEventEntity(){return CoEntity.createMouseEventEntity()}createBoundsEntity(){return CoEntity.createBoundsEntity()}createCrossAxis3DEntity(t){return CoEntity.createCrossAxis3DEntity(t)}createDisplayEntityContainer(){return CoEntity.createDisplayEntityContainer()}}const r=new n;e.VoxEntity=r},"9ba1":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("0b77"),n=i("9b53"),r=i("228b"),l=i("0efa");class a extends s.UIEntityBase{constructor(){super(),this.m_color=null,this.m_material=null}createMesh(t){let e=new Uint16Array([0,1,2,0,2,3]),i=new Float32Array(this.createVS(0,0,this.m_width,this.m_height)),s=r.VoxMesh.createRawMesh();return s.reset(),s.setBufSortFormat(t.getBufSortFormat()),s.setIVS(e),s.addFloat32Data(i,3),s.initialize(),s}initialize(t,e){if(this.isIniting()){this.init(),this.m_width=t,this.m_height=e;let i=l.VoxMaterial.createDefaultMaterial();i.initializeByCodeBuf(!1),this.m_color=l.VoxMaterial.createColor4();let s=this.createMesh(i),r=n.VoxEntity.createDisplayEntity();r.setMaterial(i),r.setMesh(s),this.applyRST(r),this.m_entities.push(r),this.m_material=i}}setColor(t){return this.m_color.copyFrom(t),null!=this.m_material&&this.m_material.setColor(t),t}getColor(){return this.m_color}destroy(){super.destroy(),this.m_material=null}}e.ColorLabel=a},"9d95":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("0b77");class n extends s.UIEntityBase{constructor(){super(),this.m_pw=10,this.m_ph=10,this.m_sx=1,this.m_sy=1,this.m_material=null,this.m_tex=null}initialize(t,e,i=128,s=128){if(null!=e&&this.isIniting()){this.init(),this.m_tex=e,this.m_uiScene=t,this.m_color=CoMaterial.createColor4(),this.m_tex.flipY=!0,this.m_tex.premultiplyAlpha=!0,this.m_tex.minFilter=CoRScene.TextureConst.LINEAR,this.m_tex.magFilter=CoRScene.TextureConst.NEAREST;let n=this.createMaterial(this.m_tex);this.m_material=n,CoMesh.plane.applyMaterial(n,!0);let r=CoMesh.plane.createXOY(0,0,1,1);this.m_pw=i,this.m_ph=s;let l=CoEntity.createDisplayEntity();l.setMaterial(n),l.setMesh(r),this.m_entities.push(l),this.applyRST(l),super.setScaleXY(this.m_sx*this.m_pw,this.m_sy*this.m_ph),this.update()}}setScaleXY(t,e){this.m_sx=t,this.m_sy=e,super.setScaleXY(t*this.m_pw,e*this.m_ph)}setScaleX(t){this.m_sx=t,super.setScaleX(t*this.m_pw)}setScaleY(t){this.m_sy=t,super.setScaleX(t*this.m_ph)}getScaleX(){return this.m_sx}getScaleY(){return this.m_sy}setColor(t){return this.m_color.copyFrom(t),null!=this.m_material&&this.m_material.setColor(t),this}getColor(){return this.m_color}destroy(){super.destroy(),this.m_material=null,this.m_uiScene=null,this.m_tex=null}}e.TextureLabel=n},"9f6b":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("0b77");class n extends s.UIEntityBase{constructor(){super(),this.m_pw=10,this.m_ph=10,this.m_rpi=0,this.m_texAtlas=null,this.m_tex=null,this.m_fontSize=24,this.m_text="tipsInfo",this.premultiplyAlpha=!0}initialize(t,e=0,i=24,s=null,n=null){if(this.isIniting()){e<0&&(e=0),i<12&&(i=12),this.m_texAtlas=t.texAtlas,this.init(),this.m_uiScene=t,this.m_rpi=e;let r=CoEntity.createDisplayEntity(),l=t.uiConfig,a=l.getUIGlobalText().fontFormat.tips;this.m_fontSize=a.fontSize,this.m_fontColor=null==s?l.createColorByData(a.fontColor):s,this.m_bgColor=null==n?CoMaterial.createColor4(.1,.1,.1,.5):n;let o=this.m_texAtlas.createCharsImage(this.m_text,this.m_fontSize,this.m_fontColor,this.m_bgColor);this.m_tex=t.rscene.textureBlock.createImageTex2D(o.width,o.height),this.m_tex.setDataFromImage(o),this.m_tex.flipY=!0,this.m_tex.premultiplyAlpha=!0,this.m_tex.minFilter=CoRScene.TextureConst.LINEAR,this.m_tex.magFilter=CoRScene.TextureConst.NEAREST;let h=this.createMaterial(this.m_tex);CoMesh.plane.setBufSortFormat(h.getBufSortFormat());let u=CoMesh.plane.createXOY(0,0,1,1);this.m_pw=o.width,this.m_ph=o.height,r.setMaterial(h),r.setMesh(u),this.m_entities.push(r),this.applyRST(r),this.setScaleXY(o.width,o.height)}}addEntity(t){if(null!=t){const e=CoRScene.MouseEvent;t.addEventListener(e.MOUSE_OUT,this,this.targetMouseOut),t.addEventListener(e.MOUSE_OVER,this,this.targetMouseOver),t.addEventListener(e.MOUSE_MOVE,this,this.targetMouseMove)}}removeEntity(t){if(null!=t){const e=CoRScene.MouseEvent;t.removeEventListener(e.MOUSE_OUT,this,this.targetMouseOut),t.removeEventListener(e.MOUSE_OVER,this,this.targetMouseOver),t.removeEventListener(e.MOUSE_MOVE,this,this.targetMouseMove)}}moveTar(t,e,i){let s=t.getGlobalBounds(),n=t.info,r=n.getPos(e,i,s,this.getGlobalBounds(),this.m_uiScene.getRect());this.setXY(r.x,r.y),this.update()}targetMouseOver(t){null==this.getScene()&&this.m_uiScene.addEntity(this,this.m_rpi),this.setVisible(!0);let e=t.currentTarget;this.setText(e.info.getCotent()),this.moveTar(e,t.mouseX,t.mouseY)}targetMouseMove(t){let e=t.currentTarget;this.moveTar(e,t.mouseX,t.mouseY)}targetMouseOut(t){this.setVisible(!1)}setText(t){if(null!=this.m_tex&&""!=t&&this.m_text!=t){this.m_text=t;let e=this.m_texAtlas.createCharsImage(t,this.m_fontSize,this.m_fontColor,this.m_bgColor);this.m_tex.setDataFromImage(e,0,0,0,!0),this.m_tex.updateDataToGpu(),this.m_pw=e.width,this.m_ph=e.height,this.setScaleXY(e.width,e.height)}}getText(){return this.m_text}destroy(){super.destroy(),this.m_uiScene=null,null!=this.m_tex&&(this.m_tex=null),this.m_texAtlas=null}}e.RectTextTip=n},b6c0:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("d1ef");class n{constructor(){this.m_colorPickPanel=new s.ColorPickPanel,this.m_curPanel=null}initialize(t,e=1){null==this.m_uiscene&&(this.m_uiscene=t,this.m_colorPickPanel.setBGColor(CoMaterial.createColor4(.4,.4,.4)),this.m_colorPickPanel.initialize(t,e,260,260,3))}getPanelByName(t){switch(t){case"colorPickPanel":return this.m_colorPickPanel;default:return null}}setXY(t,e,i,s=0){let n=this.getPanelByName(t);null!=n&&n.setXY(e,i)}openPanel(t,e=0){let i=this.getPanelByName(t);null!=i&&i.open()}closePanel(t,e=0){let i=this.getPanelByName(t);null!=i&&i.close()}getPanel(t,e=0){return this.getPanelByName(t)}}e.PanelSystem=n},c21f:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("0b77");class n extends s.UIEntityBase{constructor(){super(),this.m_index=0,this.m_total=0,this.m_step=6,this.m_vtCount=0,this.m_sizes=null,this.uuid="label"}createVS(t,e,i,s){let n=t,r=e,l=t+i,a=e+s,o=0;return[n,r,o,l,r,o,l,a,o,n,a,o]}setClipIndex(t){}setCircleClipIndex(t){t%=this.m_total,t+=this.m_total,t%=this.m_total,this.setClipIndex(t)}getClipIndex(){return this.m_index}getClipsTotal(){return this.m_total}getClipWidthAt(t){return null==this.m_sizes?this.m_width:t>=0&&t<this.m_total?(t<<=1,this.m_sizes[t]):void 0}getClipHeightAt(t){return null==this.m_sizes?this.m_height:t>=0&&t<this.m_total?(t<<=1,this.m_sizes[t+1]):void 0}getClipWidth(){return this.m_width}getClipHeight(){return this.m_height}destroy(){this.m_sizes=null,this.m_total=0,super.destroy()}}e.ClipLabelBase=n},cdda:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("f35d"),n=i("05f0"),r=i("88b9"),l=i("0efa");class a{static createCurrTextBtn(t,e,i,l,a,o=null){if(null!==a.text&&""!=a.text){let h=new n.ClipColorLabel;h.initializeWithoutTex(t,e,4),h.setColors(o);let u=new s.ClipLabel;u.depthTest=!0,u.transparent=!0,u.premultiplyAlpha=!0,u.initialize(l,[a.text]),u.setColor(a.textColor);let c=new r.Button;return c.uuid=i,c.addLabel(u),c.initializeWithLable(h),c}return null}static createTextButton(t,e,i,s,n,r){let o=n,h=s.createCharsCanvasFixSize(t,e,o.text,o.fontSize,l.VoxMaterial.createColor4(),l.VoxMaterial.createColor4(1,1,1,0));return s.addImageToAtlas(o.text,h),a.createCurrTextBtn(t,e,i,s,n,r)}static createPanelBtnWithCfg(t,e,i,s,n){let r=t.transparentTexAtlas,a=t.uiConfig,o=n.btnSize,h=o[0],u=o[1],c=n.btnNames,m=n.btnKeys,_=n.btnTips,d=n.btnTextFontFormat;r.setFontName(d.font);let p=l.VoxMaterial.createColor4();p.fromBytesArray3(a.getUIGlobalColor().text);let g=l.VoxMaterial.createColor4(1,1,1,0),f=r.createCharsCanvasFixSize(h,u,c[s],d.fontSize,p,g);r.addImageToAtlas(c[s],f);let C=Lib_VoxUI.createClipColorLabel();C.initializeWithoutTex(h,u,4);let y=Lib_VoxUI.createClipLabel();y.transparent=!0,y.premultiplyAlpha=!0,y.initialize(r,[c[s]]);let b=Lib_VoxUI.createButton();b.uuid=m[s],b.addLabel(y),b.initializeWithLable(C);let E="right",M=n.buttonStyle;if(void 0!=M&&void 0!=M.globalColor&&(E=M.tipsAlign,a.applyButtonGlobalColor(b,M.globalColor)),_.length>s){t.tips.addTipsTarget(b);let e=Lib_VoxUI.createTipInfo().setContent(_[s]);switch(E){case"top":b.info=e.alignTop();break;case"bottom":b.info=e.alignBottom();break;default:b.info=e.alignRight();break}}return b.setXY(e,i),b}}e.ButtonBuilder=a},d1de:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("75f5"),n=i("dab7");var r=null;e.RendererDevice=r;var l=null;e.SelectionEvent=l;var a=null;e.ProgressDataEvent=a;var o=null;e.MouseEvent=o;var h=null;e.EventBase=h;class u{constructor(){this.m_init=!0}init(){"undefined"!==typeof CoRScene&&(e.RendererDevice=r=CoRScene.RendererDevice,e.SelectionEvent=l=CoRScene.SelectionEvent,e.ProgressDataEvent=a=CoRScene.ProgressDataEvent,e.EventBase=h=CoRScene.EventBase,e.MouseEvent=o=CoRScene.MouseEvent)}initialize(t=null,e=""){if(this.init(),this.m_init=!this.isEnabled(),this.m_init){this.m_init=!1;let i=!1,r=0,l="";return i=n.VoxRenderer.initialize(i=>{l=i[0],r++,r>1&&null!=t&&this.isEnabled()&&t([l,e])}),""!=e&&void 0!==e||(e="static/cospace/engine/rscene/CoRScene.umd.min.js"),new s.ModuleLoader(1,()=>{this.init(),i?(r++,r>1&&null!=t&&this.isEnabled()&&t([l,e])):null!=t&&"undefined"!==typeof CoRScene&&t([e])}).load(e),!0}return!1}get RendererDevice(){return CoRScene.RendererDevice}get RendererState(){return CoRScene.RendererState}get RenderDrawMode(){return CoRScene.RenderDrawMode}get VtxBufConst(){return CoRScene.VtxBufConst}get TextureConst(){return CoRScene.TextureConst}get Vector3D(){return CoRScene.Vector3D}get MouseEvent(){return CoRScene.MouseEvent}get EventBase(){return CoRScene.EventBase}get SelectionEvent(){return CoRScene.SelectionEvent}get ProgressDataEvent(){return CoRScene.ProgressDataEvent}get KeyboardEvent(){return CoRScene.KeyboardEvent}get Keyboard(){return CoRScene.Keyboard}get ShaderCodeUUID(){return CoRScene.ShaderCodeUUID}get MaterialContextParam(){return CoRScene.MaterialContextParam}get MaterialPipeType(){return CoRScene.MaterialPipeType}createSelectionEvent(){return CoRScene.createSelectionEvent()}createProgressDataEvent(){return CoRScene.createProgressDataEvent()}createVec3(t,e,i,s){return CoRScene.createVec3(t,e,i,s)}createMat4(t,e){return CoRScene.createMat4(t,e)}createColor4(t,e,i,s){return CoRScene.createColor4(t,e,i,s)}createAABB(){return CoRScene.createAABB()}applySceneBlock(t){return CoRScene.applySceneBlock(t)}createRendererSceneParam(t){return CoRScene.createRendererSceneParam(t)}createRendererScene(t,e,i){return CoRScene.createRendererScene(t,e,i)}setRendererScene(t){return CoRScene.setRendererScene(t)}getRendererScene(){return CoRScene.getRendererScene()}createMouseEvt3DDispatcher(){return CoRScene.createMouseEvt3DDispatcher()}createEventBaseDispatcher(){return CoRScene.createEventBaseDispatcher()}createDefaultMaterial(t){return CoRScene.createDefaultMaterial()}createLineMaterial(t){return CoRScene.createLineMaterial(t)}createQuadLineMaterial(t){return CoRScene.createQuadLineMaterial(t)}createShaderMaterial(t){return CoRScene.createShaderMaterial(t)}createMaterial(t){return CoRScene.createMaterial(t)}createDataMesh(){return CoRScene.createDataMesh()}createRawMesh(){return CoRScene.createRawMesh()}createBoundsMesh(){return CoRScene.createBoundsMesh()}createDataMeshFromModel(t,e,i){return CoRScene.createDataMeshFromModel(t,e,i)}createDisplayEntityFromModel(t,e,i,s){return CoRScene.createDisplayEntityFromModel(t,e,i,s)}createFreeAxis3DEntity(t,e,i){return CoRScene.createFreeAxis3DEntity(t,e,i)}createAxis3DEntity(t,e){return CoRScene.createAxis3DEntity(t,e)}createCrossAxis3DEntity(t,e){return CoRScene.createCrossAxis3DEntity(t,e)}createDisplayEntityWithDataMesh(t,e,i,s){return CoRScene.createDisplayEntityWithDataMesh(t,e,i,s)}createDisplayEntity(t){return CoRScene.createDisplayEntity(t)}createMouseEventEntity(t){return CoRScene.createMouseEventEntity(t)}createBoundsEntity(t){return CoRScene.createBoundsEntity(t)}createDisplayEntityContainer(){return CoRScene.createDisplayEntityContainer()}creatMaterialContextParam(){return CoRScene.creatMaterialContextParam()}createMaterialContext(){return CoRScene.createMaterialContext()}VerticalCCWOnXOY(t){return CoRScene.VerticalCCWOnXOY(t)}VerticalCWOnXOY(t){return CoRScene.VerticalCWOnXOY(t)}createRendererSceneGraph(){return CoRScene.createRendererSceneGraph()}createEvtNode(){return CoRScene.createEvtNode()}isEnabled(){return n.VoxRenderer.isEnabled()&&"undefined"!==typeof CoRScene}}const c=new u;e.VoxRScene=c},d1ef:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("d632"),n=i("9d95"),r=i("9ba1"),l=i("d1de"),a=i("0efa");class o extends s.UIPanel{constructor(){super(),this.m_marginWidth=15,this.m_colorLabel=null,this.m_callback=null,this.m_initing=!0,this.m_pixelsW=256,this.m_pixelsH=256,this.m_prePickX=-1,this.m_prePickY=-1,this.m_autoDelay=0}initialize(t,e,i=260,s=260,n=3){this.isIniting()&&(this.init(),this.m_marginWidth=n,this.m_scene=t,this.m_rpi=e,this.m_panelW=i,this.m_panelH=s)}destroy(){super.destroy()}setColor(t){this.isOpen()&&null!=t&&(null==this.m_colorLabel&&(this.m_colorLabel=new r.ColorLabel,this.m_colorLabel.initialize(32,32),this.m_colorLabel.setXY(2,this.m_panelH),this.addEntity(this.m_colorLabel)),this.m_colorLabel.setColor(t),this.m_colorLabel.setVisible(!0))}setPickXY(t,e){this.m_prePickX=t,this.m_prePickY=e}setSelectColorCallback(t){this.m_callback=t}buildPanel(t,e){this.buildItems()}buildItems(){if(this.m_initing){this.m_initing=!1;let t=this.getScene(),e="static/assets/colors.png",i=this.m_marginWidth,s=this.m_panelW-2*i,r=this.m_panelH-2*i,l=this.createTexByUrl(e),a=new n.TextureLabel;a.initialize(t,l,s,r),a.setXY(i,i),this.addEntity(a)}}getRGBAByXY(t,e){t|=0,e|=0,t<0&&(t=0),e<0&&(e=0),t>255&&(t=255),e>255&&(e=255),e=255-e,null==this.m_color&&(this.m_color=a.VoxMaterial.createColor4());let i=this.m_pixels;if(null!=this.m_pixels){let s=4*(e*this.m_pixelsW+t),n=i[s],r=i[s+1],l=i[s+2];this.m_color.setRGB3Bytes(n,r,l)}return this.m_color}createColorData(t){let e=document.createElement("canvas");e.style.display="bolck",e.style.overflow="hidden",e.style.left="0px",e.style.top="0px",e.style.position="absolute",e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0);let s=i.getImageData(0,0,t.width,t.height);this.m_pixels=s.data}createTexByUrl(t=""){let e=this.getScene(),i=e.rscene.textureBlock.createImageTex2D(64,64,!1),s=new Image;return s.onload=t=>{this.createColorData(s),i.setDataFromImage(s,0,0,0,!1)},s.src=t,i}openThis(){null!=this.m_scene&&this.m_scene.addEventListener(l.MouseEvent.MOUSE_DOWN,this,this.stMouseDownListener)}closeThis(){null!=this.m_scene&&this.m_scene.removeEventListener(l.MouseEvent.MOUSE_DOWN,this,this.stMouseDownListener),this.m_callback=null,null!=this.m_colorLabel&&this.m_colorLabel.setVisible(!1),this.stMouseUp(null)}pickColorByXY(t,e){if((this.m_prePickX!=t||this.m_prePickY!=e)&&(this.m_prePickX=t,this.m_prePickY=e,t>=0||t<=this.m_panelW||e>=0||e<=this.m_panelH)){let i=this.m_marginWidth;t-=i,e-=i;let s=this.getRGBAByXY(t,e);null!=this.m_callback&&(this.setColor(s),this.m_callback(s,t,e))}}stMouseDownListener(t){let e=t.mouseX,i=t.mouseY,s=this.m_v0;s.setXYZ(e,i,0),this.globalToLocal(s),s.x<0||s.x>this.m_panelW||s.y<0||s.y>this.m_panelH?this.close():(this.pickColorByXY(s.x,s.y),this.m_scene.addEventListener(l.EventBase.ENTER_FRAME,this,this.enterFrame,!0,!1),this.m_scene.addEventListener(l.MouseEvent.MOUSE_UP,this,this.stMouseUp,!0,!1))}enterFrame(t){if(this.m_autoDelay>20&&this.m_autoDelay%7==0){let t=this.getScene().getStage(),e=this.m_v0;e.setXYZ(t.mouseX,t.mouseY,0),this.globalToLocal(e),this.pickColorByXY(e.x,e.y)}this.m_autoDelay++}stMouseUp(t){null!=this.m_scene&&(this.m_scene.removeEventListener(l.EventBase.ENTER_FRAME,this,this.enterFrame),this.m_scene.removeEventListener(l.MouseEvent.MOUSE_UP,this,this.stMouseUp))}layout(){}}e.ColorPickPanel=o},d632:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("23ac"),n=i("9ba1");class r extends s.UIEntityContainer{constructor(){super(),this.m_panelW=100,this.m_panelH=150,this.m_isOpen=!1,this.autoLayout=!0,this.m_openListener=null,this.m_closeListener=null,this.m_panelBuilding=!0}setSize(t,e){this.m_panelW=t,this.m_panelH=e}setBGColor(t){return null==this.m_bgColor&&(this.m_bgColor=CoMaterial.createColor4()),this.m_bgColor.copyFrom(t),null!=this.m_bgLabel&&this.m_bgLabel.setColor(t),this}init(){this.isIniting()&&(null==this.m_bgColor&&(this.m_bgColor=CoMaterial.createColor4()),super.init())}setUIscene(t,e=-1){null==this.m_scene&&null!=t&&(this.m_scene=t,e>=0&&(this.m_rpi=e),this.init())}openThis(){}closeThis(){}setOpenAndLoseListener(t,e){this.m_openListener=t,this.m_closeListener=e}open(t=null,e=-1){this.m_isOpen||(this.isIniting()&&this.init(),null!=t&&(this.m_scene=t),e>=0&&(this.m_rpi=e),this.m_scene.addEntity(this,this.m_rpi),this.m_isOpen=!0,this.setVisible(!0),this.openThis(),this.autoLayout&&(this.addLayoutEvt(),this.layout()),null!=this.m_openListener&&this.m_openListener())}isOpen(){return this.m_isOpen}isClosed(){return!this.m_isOpen}close(){this.m_isOpen&&(this.m_scene.removeEntity(this),this.m_isOpen=!1,this.setVisible(!1),this.removeLayoutEvt(),this.closeThis(),null!=this.m_closeListener&&this.m_closeListener())}destroy(){super.destroy(),this.m_panelBuilding=!0,null!=this.m_bgLabel&&(this.m_bgLabel.destroy(),this.m_bgLabel=null),this.m_openListener=null,this.m_closeListener=null}buildPanel(t,e){}updateScene(){let t=this.getScene();if(null!=t&&this.m_panelBuilding&&null==this.m_bgLabel){this.m_panelBuilding=!1;let t=this.m_panelW,e=this.m_panelH,i=this.createBG(t,e);this.buildPanel(t,e),this.addEntity(i),this.setVisible(this.m_isOpen),this.m_isOpen&&(this.addLayoutEvt(),this.layout())}}addLayoutEvt(){if(this.autoLayout){let t=this.getScene();if(null!=t){let e=CoRScene.EventBase;t.addEventListener(e.RESIZE,this,this.resize)}}}removeLayoutEvt(){if(this.autoLayout){let t=this.getScene();if(null!=t){let e=CoRScene.EventBase;t.removeEventListener(e.RESIZE,this,this.resize)}}}createBG(t,e){let i=new n.ColorLabel;return i.depthTest=!0,i.initialize(t,e),i.setZ(-.2),i.setColor(this.m_bgColor),this.m_bgLabel=i,this.initializeEvent(i.getREntities()[0]),i}initializeEvent(t,e="uiPlane"){const i=CoRScene.MouseEvent;let s=CoRScene.createMouseEvt3DDispatcher();s.currentTarget=this,s.uuid=e,s.addEventListener(i.MOUSE_OVER,this,this.mouseOverListener),s.addEventListener(i.MOUSE_OUT,this,this.mouseOutListener),t.setEvtDispatcher(s),t.mouseEnabled=!0}mouseOverListener(t){}mouseOutListener(t){}resize(t){this.layout()}layout(){let t=this.getScene();if(null!=t){this.update();let e=t.getRect(),i=Math.round(e.x+.5*(e.width-this.getWidth())),s=Math.round(e.y+.5*(e.height-this.getHeight()));this.setXY(i,s),this.update()}}}e.UIPanel=r},dab7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("75f5");class n{constructor(){this.m_init=!0}initialize(t=null,e=""){return this.m_init=!this.isEnabled(),!!this.m_init&&(this.m_init=!1,""!=e&&void 0!==e||(e="static/cospace/engine/renderer/CoRenderer.umd.min.js"),new s.ModuleLoader(1,()=>{null!=t&&this.isEnabled()&&t([e])}).load(e),!0)}get RendererDevice(){return CoRenderer.RendererDevice}get RendererState(){return CoRenderer.RendererState}createRendererInstance(){return CoRenderer.createRendererInstance()}isEnabled(){return"undefined"!==typeof CoRenderer}}const r=new n;e.VoxRenderer=r},ddfa:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("0b77");class n extends s.UIEntityBase{constructor(){super(),this.m_index=0,this.m_total=0,this.m_colors=null,this.m_hasTex=!0,this.m_lb=null,this.m_ilb=null,this.uuid="colorClipLabel"}hasTexture(){return this.m_hasTex}setIconLabel(t){this.m_ilb=t}getIconLabel(){return this.m_ilb}initialize(t,e){if(this.isIniting()&&e>0){this.init(),this.m_lb=t;let i=new Array(e);for(let t=0;t<e;++t)i[t]=CoMaterial.createColor4();this.m_colors=i,this.m_total=e,this.setClipIndex(0)}}getColorAt(t){if(t>=0&&t<this.m_total)return this.m_colors[t]}setColorAt(t,e){t>=0&&t<this.m_total&&null!=e&&this.m_colors[t].copyFrom(e)}setClipIndex(t){t>=0&&t<this.m_total&&(this.m_index=t,this.m_lb.setColor(this.m_colors[t]))}setCircleClipIndex(t){t%=this.m_total,t+=this.m_total,t%=this.m_total,this.setClipIndex(t)}getClipIndex(){return this.m_index}getClipsTotal(){return this.m_total}setLabelClipIndex(t){this.m_lb.setClipIndex(t)}getLabelClipIndex(){return this.m_lb.getClipIndex()}setLabelCircleClipIndex(t){this.m_lb.setCircleClipIndex(t)}getLabelClipsTotal(){return this.m_lb.getClipsTotal()}getColors(){return this.m_colors}getClipWidth(){return this.m_lb.getClipHeight()}getClipHeight(){return this.m_lb.getClipWidth()}copyTransformFrom(t){if(null!=t){let e=t.getScaleX(),i=t.getScaleY(),s=t.getRotation();this.setScaleXY(e,i),this.setRotation(s),t.getPosition(this.m_v0),this.setPosition(this.m_v0)}}getREntities(){if(null!=this.m_ilb){let t=this.m_lb.getREntities();return t.concat(this.m_ilb.getREntities())}return this.m_lb.getREntities()}getRContainer(){return null}update(){this.m_bounds.reset();let t=this.m_scaleV,e=this.m_lb;e.setRotation(this.m_rotation),e.setScaleXY(t.x,t.y),e.setPosition(this.m_pos),e.update(),this.m_bounds.union(e.getGlobalBounds()),e=this.m_ilb,null!=e&&(e.copyTransformFrom(this.m_lb),e.update(),this.m_bounds.union(e.getGlobalBounds())),this.m_bounds.updateFast()}destroy(){this.m_colors=null,this.m_total=0;let t=this.m_lb;null!=t&&(t.destroy(),t=null),t=this.m_ilb,null!=t&&(t.destroy(),t=null),super.destroy()}}e.ColorClipLabel=n},e8f9:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("88b9"),n=i("f35d"),r=i("ddfa");class l extends s.Button{constructor(){super(),this.m_flagLb=null,this.m_pw=32,this.m_ph=32,this.m_borderWidth=4,this.m_dis=4,this.uuid="flagBtn"}initializeWithSize(t,e=32,i=32,s=4,n=4){return this.isIniting()&&null!=t&&(this.m_pw=e,this.m_ph=i,this.m_borderWidth=s,this.m_dis=n,this.m_selectDispatcher=CoRScene.createEventBaseDispatcher(),this.m_currEvent=CoRScene.createSelectionEvent(),this.createFlagBtn(t)),this}addEventListener(t,e,i,s=!0,n=!1){return t==CoRScene.SelectionEvent.SELECT?this.m_selectDispatcher.addEventListener(t,e,i,s,n):super.addEventListener(t,e,i,s,n),this}removeEventListener(t,e,i){return t==CoRScene.SelectionEvent.SELECT?this.m_selectDispatcher.removeEventListener(t,e,i):super.removeEventListener(t,e,i),this}createFlagBtn(t){let e=t,i=CoMaterial.createColor4(.7,.7,.7),s=CoMaterial.createColor4(.3,.3,.3),l=this.createFlagImg(e,i,s);e.addImageToAtlas("flagBtn_01",l),i=CoMaterial.createColor4(.7,.7,.7),s=CoMaterial.createColor4(.3,.3,.3);let a=CoMaterial.createColor4(1,1,1);l=this.createFlagImg(e,i,s,a,this.m_dis),e.addImageToAtlas("flagBtn_02",l);let o=["flagBtn_01","flagBtn_02"],h=new n.ClipLabel;h.initialize(e,o);let u=new r.ColorClipLabel;u.initialize(h,4),u.getColorAt(0).setRGB3f(.8,.8,.8),u.getColorAt(1).setRGB3f(0,1,.2),u.getColorAt(2).setRGB3f(1,.2,1),u.setLabelClipIndex(0),this.m_flagLb=h,this.initializeWithLable(u)}sendSelectionEvt(){this.m_selectDispatcher.uuid=this.uuid,this.m_currEvent.target=this,this.m_currEvent.type=CoRScene.SelectionEvent.SELECT,this.m_currEvent.flag=this.getFlag(),this.m_currEvent.phase=1,this.m_selectDispatcher.dispatchEvt(this.m_currEvent),this.m_currEvent.target=null}mouseUpListener(t){this.isEnabled()&&(super.mouseUpListener(t),this.selectListener())}setFlag(t,e=!1){this.m_flagLb.setClipIndex(t?1:0),e&&this.sendSelectionEvt()}getFlag(){return 1==this.m_flagLb.getClipIndex()}selectListener(){1==this.m_flagLb.getClipIndex()?this.m_flagLb.setClipIndex(0):this.m_flagLb.setClipIndex(1),this.sendSelectionEvt()}createFlagImg(t,e,i,s=null,n=2){let r=this.m_pw,l=this.m_ph,a=this.m_borderWidth,o=t.createCanvas(r,l,e,!1),h=o.getContext("2d");return h.fillStyle=i.getCSSDecRGBAColor(),h.fillRect(a,a,r-2*a,l-2*a-1),null!=s&&(h.fillStyle=s.getCSSDecRGBAColor(),h.fillRect(a+n,a+n,r-2*(a+n),l-2*(a+n)-1)),o}destroy(){this.m_flagLb=null,super.destroy()}}e.FlagButton=l},efac:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("5470");class n extends s.LayouterBase{constructor(){super(),this.m_offsetvs=[]}update(t){const e=this.m_entities,i=e.length;let s=CoMath.createVec3();for(let n=0;n<i;++n)s.copyFrom(this.m_offsetvs[n]),s.y=t.height-s.y,s.addBy(this.m_offsetV),e[n].setPosition(s),e[n].update()}initEntityLayout(t,e){let i=CoMath.createVec3();t.getPosition(i),i.y=e.height-i.y,this.m_offsetvs.push(i)}destroy(){this.m_offsetvs=null,super.destroy()}}e.LeftTopLayouter=n},f280:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("7913");class n{constructor(){this.m_promptPanel=null}initialize(t,e=3){if(null==this.m_promptPanel){this.m_uiscene=t;let i=t.uiConfig,n=i.getUIPanelCfgByName("promptPanel"),r=n.panelSize,l=n.btnSize,a=n.btnNames,o=new s.PromptPanel;o.initialize(this.m_uiscene,e,r[0],r[1],l[0],l[1],a[0],a[1]),o.setZ(3);let h=CoMaterial.createColor4();h.fromBytesArray3(n.bgColor),o.setBGColor(h),this.m_promptPanel=o}}setPromptListener(t,e,i=0){null!=this.m_promptPanel&&this.m_promptPanel.setListener(t,e)}showPrompt(t,e=0){null!=this.m_promptPanel&&(this.m_promptPanel.setPrompt(t),this.m_promptPanel.open())}setPromptTextColor(t,e=0){null!=this.m_promptPanel&&this.m_promptPanel.setPromptTextColor(t)}setPromptBGColor(t,e=0){null!=this.m_promptPanel&&this.m_promptPanel.setBGColor(t)}getPromptPanel(t=0){return this.m_promptPanel}}e.PromptSystem=n},f35d:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("c21f");class n extends s.ClipLabelBase{constructor(){super(),this.m_material=null}createMesh(t,e){let i=4,s=[0,1,2,0,2,3];const n=this.m_total;let r=new Uint16Array(6*n),l=new Float32Array(12*n),a=new Float32Array(8*n);this.m_sizes=new Array(2*n);let o=0;for(let u=0;u<n;++u){const n=t.getTexObjFromAtlas(e[u]);r.set(s,u*s.length),l.set(this.createVS(0,0,n.getWidth(),n.getHeight()),12*u),a.set(n.uvs,8*u);for(let t=0;t<s.length;++t)s[t]+=i;this.m_sizes[o++]=n.getWidth(),this.m_sizes[o++]=n.getHeight()}let h=CoMesh.createRawMesh();return h.reset(),h.setIVS(r),h.addFloat32Data(l,3),h.addFloat32Data(a,2),h.initialize(),h}hasTexture(){return!0}initialize(t,e){if(this.isIniting()&&null!=t&&null!=e&&e.length>0){this.init(),this.m_pos=CoMath.createVec3(),this.m_total=e.length;let i=t.getTexObjFromAtlas(e[0]),s=this.createMesh(t,e);this.m_vtCount=s.vtCount,this.m_material=this.createMaterial(i.texture);let n=CoEntity.createDisplayEntity();n.setMaterial(this.m_material),n.setMesh(s),n.setIvsParam(0,this.m_step),this.m_entities.push(n),this.applyRST(n),this.setClipIndex(0)}}initializeWithLable(t){if(this.isIniting()&&null!=t&&t!=this){if(t.getClipsTotal()<1)throw Error("Error: srcLable.getClipsTotal() < 1");this.init();let e=t.getREntities();for(let i=0;i<e.length;++i){let s=e[i],n=s.getMesh();this.m_pos=CoMath.createVec3();let r=s.getMaterial().getTextureAt(0),l=this.m_total=t.getClipsTotal();this.m_sizes=new Array(2*l);let a=0;for(let e=0;e<l;++e)this.m_sizes[a++]=t.getClipWidthAt(e),this.m_sizes[a++]=t.getClipHeightAt(e);this.m_vtCount=n.vtCount,this.m_material=this.createMaterial(r);let o=CoEntity.createDisplayEntity();o.setMaterial(this.m_material),o.setMesh(n),o.setIvsParam(0,this.m_step),this.m_entities.push(o),this.applyRST(o)}this.setClipIndex(0)}}displaceFromLable(t){if(null!=t&&t!=this&&t.getClipsTotal()<1)throw Error("Error: srcLable.getClipsTotal() < 1")}setColor(t){null!=this.m_material&&this.m_material.setColor(t)}getColor(t){null!=this.m_material&&this.m_material.getColor(t)}setClipIndex(t){if(t>=0&&t<this.m_total){this.m_index=t;let e=this.m_entities;for(let i=0;i<e.length;++i)e[i].setIvsParam(t*this.m_step,this.m_step);t<<=1,this.m_width=this.m_sizes[t],this.m_height=this.m_sizes[t+1]}}}e.ClipLabel=n},fae3:function(t,e,i){"use strict";i.r(e);i("1eb2");var s=i("7dc1");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n)}})}));